<form [formGroup]="billForm" class="text-center border border-light p-5">
  <p class="h4 mb-4">Crear factura</p>

  <div class="container">
    <div class="row">
      <div class="col">
        <!--Client-->
        <p>Cliente</p>

        <select
          class="form-control mb-4"
          formControlName="idClient"
          (change)="selectClient($event.target)"
        >
          <option [value]="item.id" *ngFor="let item of clientList">
            {{ item.nameClient }}
          </option>
        </select>

        <!-- Name -->
        <input
          type="text"
          id="Name"
          class="form-control mb-4"
          placeholder="Nombre del cliente"
          formControlName="clientName"
          [(ngModel)]="ngModelClientName"
          readonly
        />

        <!-- Ruc -->
        <input
          type="Ruc"
          id="Ruc"
          class="form-control mb-4"
          placeholder="Ruc de cliente"
          formControlName="rucClient"
          [(ngModel)]="ngModelRucName"
          readonly
        />
      </div>
      <div class="col">
        <input
          type="date"
          id="dateOfIssue"
          class="form-control mb-4"
          formControlName="dateOfIssue"
        />

        <p>Compañia</p>
        <!-- Name -->
        <input
          type="text"
          id="Name"
          class="form-control mb-4"
          placeholder="Nombre de la compañia"
          formControlName="companyName"
          [(ngModel)]="ngModelCompanyName"
          readonly
        />

        <!-- Ruc -->
        <input
          type="Ruc"
          id="Ruc"
          class="form-control mb-4"
          placeholder="Ruc de la compañia"
          formControlName="rucCompany"
          [(ngModel)]="ngModelRucCompany"
          readonly
        />
      </div>
    </div>
  </div>
  <div class="container mg-10">
    <div class="row">
      <div class="col">
        <p class="h4 mb-4">Items</p>
      </div>
      <div class="col">
        <button
          mdbBtn
          color="info"
          block="true"
          type="submit"
          class="btn btn-primary"
          (click)="addItem()"
        >
          Agregar
        </button>
      </div>
    </div>
  </div>

  <hr />

  <div class="">
    <table class="table table-striped table-bordered row-border hover">
      <thead>
        <tr>
          <th>Nombre del producto</th>
          <th>Cantidad</th>
          <th>Descripcion del producto</th>
          <th>Precio por unidad</th>
          <th>Costo total</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of itemQuantity; index as i">
          <td>
            <input
              type="text"
              id="productName"
              class="form-control mb-4"
              placeholder="Nombre del producto"
              (input)="onChangeInput($event.target, item)"
            />
          </td>
          <td>
            <input
              type="number"
              id="quantity"
              class="form-control mb-4"
              placeholder="Cantidad"
              [(ngModel)]="item.quantity"
              [ngModelOptions]="{ standalone: true }"
              (input)="onChangeInput($event.target, item, 'unitPrice')"
            />
          </td>
          <td>
            <input
              type="Phone"
              id="productDescription"
              class="form-control mb-4"
              placeholder="Descripcion del producto"
              (input)="onChangeInput($event.target, item)"
            />
          </td>
          <td>
            <input
              type="number"
              id="unitPrice"
              class="form-control mb-4"
              placeholder="Precio por unidad"
              [(ngModel)]="item.unitPrice"
              [ngModelOptions]="{ standalone: true }"
              (input)="onChangeInput($event.target, item, 'quantity')"
            />
          </td>
          <td>
            <input
              type="number"
              id="totalCost"
              class="form-control mb-4"
              placeholder="Costo total"
              [(ngModel)]="item.totalCost"
              [ngModelOptions]="{ standalone: true }"
              (input)="onChangeInput($event.target, item)"
              readonly
            />
          </td>
          <td>
            <button
              mdbBtn
              color="info"
              block="true"
              type="submit"
              class="btn btn-danger"
              (click)="deleteItem(item)"
            >
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Default form subscription -->
  <div class="container">
    <div class="row">
      <div class="col"></div>
      <div class="col">
        <div class="row">
          <div class="col"></div>
          <div class="col-md-auto">SubTotal</div>
          <div class="col col-lg-4">
            <input
              type="text"
              id="Name"
              class="form-control"
              formControlName="SubTotal"
              [(ngModel)]="ngModelSubTotal"
              readonly
            />
          </div>
        </div>
        <div class="row">
          <div class="col"></div>
          <div class="col-md-auto">IGV</div>
          <div class="col col-lg-4">
            <input
              type="text"
              id="Name"
              class="form-control"
              formControlName="IGV"
              [(ngModel)]="ngModelIGV"
              readonly
            />
          </div>
        </div>
        <div class="row">
          <div class="col"></div>
          <div class="col-md-auto">Total</div>
          <div class="col col-lg-4">
            <input
              type="text"
              id="Name"
              class="form-control"
              formControlName="Total"
              [(ngModel)]="ngModelTotal"
              readonly
            />
          </div>
        </div>
      </div>
    </div>
  </div>

  <hr />

  <!-- Sign in button -->
  <button
    mdbBtn
    color="info"
    block="true"
    type="submit"
    (click)="sendData()"
    class="btn btn-success"
  >
    Guardar factura
  </button>
</form>
<!-- Default form subscription -->
